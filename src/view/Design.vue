<template>
  <div class="design-gallery">
    <h1 class="gallery-title">Design Graphique & Illustrations</h1>
    
  <div class="gallery-container">
      <div class="image-box">
        <img class="gallery-image" src="@/assets/affiche_prison_break.png" alt="Affiche Prison Break" />
        <div class="overlay">
          <p>AFFICHE PRISON BREAK</p>
        </div>
      </div>

      <div class="image-box">
        <img class="gallery-image" src="@/assets/affiche_foot.png" alt="Affiche Foot" />
        <div class="overlay">
          <p>AFFICHE FOOT</p>
        </div>
      </div>

      <div class="image-box">
        <img class="gallery-image" src="@/assets/affiche_moto.png" alt="Affiche Moto" />
        <div class="overlay"><p>AFFICHE MOTO</p></div>
      </div>

      <div class="image-box">
        <img class="gallery-image" src="@/assets/affiche_rider.jpeg" alt="Affiche Rider" />
        <div class="overlay"><p>AFFICHE RIDER</p></div>
      </div>

      <div class="image-box">
        <img class="gallery-image" src="@/assets/affiche_the_broken.png" alt="Affiche The Broken" />
        <div class="overlay"><p>AFFICHE THE BROKEN</p></div>
      </div>

      <div class="image-box">
        <img class="gallery-image" src="@/assets/By_Amin_Miladi.png" alt="By Amin Miladi" />
        <div class="overlay"><p>BY AMIN MILADI</p></div>
      </div>

      <div class="image-box">
        <img class="gallery-image" src="@/assets/cover_bonp.jpeg" alt="Cover Bonp" />
        <div class="overlay"><p>COVER BONP</p></div>
      </div>

      <div class="image-box">
        <img class="gallery-image" src="@/assets/citation_by_amin_miladi.png" alt="Citation" />
        <div class="overlay"><p>CITATION BY AMIN MILADI</p></div>
      </div>

      <div class="image-box">
        <img class="gallery-image" src="@/assets/Cream_Vintage.png" alt="Cream Vintage" />
        <div class="overlay"><p>CREAM VINTAGE</p></div>
      </div>

      <div class="image-box">
        <img class="gallery-image" src="@/assets/dessin.png" alt="Dessin" />
        <div class="overlay"><p>DESSIN</p></div>
      </div>

      <div class="image-box">
        <img class="gallery-image" src="@/assets/Illustration_Festival_Flyer.png" alt="Illustration Festival" />
        <div class="overlay"><p>ILLUSTRATION FESTIVAL</p></div>
      </div>

      <div class="image-box">
        <img class="gallery-image" src="@/assets/Smash.png" alt="Smash" />
        <div class="overlay"><p>SMASH</p></div>
      </div>

      <div class="image-box">
        <img class="gallery-image" src="@/assets/poster_psg.jpeg" alt="Poster PSG" />
        <div class="overlay"><p>POSTER PSG</p></div>
      </div>

      <div class="image-box">
        <img class="gallery-image" src="@/assets/personnage_de_mon_manga.png" alt="Personnage Manga" />
        <div class="overlay"><p>PERSONNAGE DE MON MANGA</p></div>
      </div>

      <div class="image-box">
        <img class="gallery-image" src="@/assets/osez_vivre_plus.png" alt="Osez Vivre Plus" />
        <div class="overlay"><p>OSEZ VIVRE PLUS</p></div>
      </div>


      </div>
    <div class="gallery-container">
      <div class="image-box">
        <img class="gallery-image" src="@/assets/capture_2024_06_20.png" alt="Capture" />
        <div class="overlay">
          <p>CAPTURE ÉCRAN D'UN DESIGN</p>
        </div>
      </div>
      <div class="image-box">
        <img class="gallery-image" src="@/assets/crocodile.png" alt="Crocodile" />
        <div class="overlay">
          <p>COLORISATION CROCODILE DANS ONE PIECE</p>
        </div>
      </div>
      <div class="image-box">
        <img class="gallery-image" src="@/assets/logo_mayel_blanc.png" alt="Logo Blanc" />
        <div class="overlay">
          <p>LOGO MAYEL BLANC</p>
        </div>
      </div>

      <div class="image-box">
        <img class="gallery-image" src="@/assets/extinction.png" alt="Extinction" />
        <div class="overlay">
          <p>LA COURSE CONTRE L'EXTINCTION</p>
        </div>
      </div>
      <div class="image-box">
        <img class="gallery-image" src="@/assets/neufphone1.png" alt="Neuf Phone 1" />
        <div class="overlay">
          <p>AFFICHE NEUF PHONE V1</p>
        </div>
      </div>
      <div class="image-box">
        <img class="gallery-image" src="@/assets/neufphone2.png" alt="Neuf Phone 2" />
        <div class="overlay">
          <p>AFFICHE NEUF PHONE V2</p>
        </div>
      </div>

      <div class="image-box">
        <img class="gallery-image" src="@/assets/logov1.png" alt="Logo V1" />
        <div class="overlay">
          <p>LOGO MAYEL V1</p>
        </div>
      </div>
      <div class="image-box">
        <img class="gallery-image" src="@/assets/mangafest.png" alt="Manga Fest" />
        <div class="overlay">
          <p>AFFICHE MANGA FEST</p>
        </div>
      </div>
      <div class="image-box">
        <img class="gallery-image" src="@/assets/Affiche_rire_toxique.png" alt="Affiche Rire Toxique" />
        <div class="overlay">
          <p>AFFICHE RIRE TOXIQUE</p>
        </div>
      </div>

      <div class="image-box">
        <img class="gallery-image" src="@/assets/nouveau_logo_rire_toxique.jpg" alt="Nouveau Logo Rire Toxique" />
        <div class="overlay">
          <p>LOGO RIRE TOXIQUE V1</p>
        </div>
      </div>
      <div class="image-box">
        <img class="gallery-image" src="@/assets/Capture_décran_2025-03-06_131900.png" alt="Capture d'écran" />
        <div class="overlay">
          <p>LOGO RIRE TOXIQUE</p>
        </div>
      </div>
      <div class="image-box">
        <img class="gallery-image" src="@/assets/plannche_(1).png" alt="Planche" />
        <div class="overlay">
          <p>AFFICHE RÉCHAUFFEMENT CLIMATIQUE</p>
        </div>
      </div>

      <div class="image-box">
        <img class="gallery-image" src="@/assets/étiquette_Sapik.png" alt="Étiquette Sapik" />
        <div class="overlay">
          <p>ÉTIQUETTE SAPIK</p>
        </div>
      </div>
      <div class="image-box">
        <img class="gallery-image" src="@/assets/SAPIK_BOUTEILLE_JAUNE-mockup.png" alt="Sapik Bouteille Jaune" />
        <div class="overlay">
          <p>SAPIK BOUTEILLE JAUNE</p>
        </div>
      </div>
      <div class="image-box">
        <img class="gallery-image" src="@/assets/SAPIK_BOUTEILLE_ROUGE-mockup.png" alt="Sapik Bouteille Rouge" />
        <div class="overlay">
          <p>SAPIK BOUTEILLE ROUGE</p>
        </div>
      </div>

      <div class="image-box">
        <img class="gallery-image" src="@/assets/SAPIK_BOUTEILLE_VERTE-mockup.png" alt="Sapik Bouteille Verte" />
        <div class="overlay">
          <p>SAPIK BOUTEILLE VERTE</p>
        </div>
      </div>


      <div class="image-box">
        <img class="gallery-image" src="@/assets/gensis_zero.png" alt="gensis zero" />
        <div class="overlay">    
          <p>genesis zero</p>
        </div>
      </div>
      

      <div class="image-box">
        <img class="gallery-image" src="@/assets/mockup.png" alt="gensis zero mockup" />
        <div class="overlay">    
          <p>genesis zero mockup</p>
        </div>
      </div>


        <div class="banner-box">
      <img class="gallery-banner" src="@/assets/banniere.png" alt="Bannière" />
      <div class="overlay">
        <p>BANNIÈRE POUR MA CHAÎNE MANGA</p>
      </div>
    </div>

    </div>

    <div
      v-if="isLightboxOpen"
      class="lightbox-overlay"
      @click.self="closeLightbox"
    >
      <button class="lightbox-close" @click="closeLightbox">
        ✕
      </button>

      <button class="lightbox-nav lightbox-prev" @click.stop="prevImage">
        ‹
      </button>

      <div class="lightbox-content" v-if="currentImage">
        <img
          :src="currentImage.src"
          :alt="currentImage.alt"
          class="lightbox-image"
        />
        <p class="lightbox-title">{{ currentImage.alt }}</p>
      </div>

      <button class="lightbox-nav lightbox-next" @click.stop="nextImage">
        ›
      </button>
    </div>
  </div>
</template>

<script>
export default {
  name: "DesignPage",

  data() {
    return {
      isLightboxOpen: false,
      currentIndex: 0,
      images: [],
    };
  },

  computed: {
    currentImage() {
      return this.images[this.currentIndex] || null;
    },
  },

  methods: {
    refreshImages() {
      const nodes = document.querySelectorAll(".image-box img, .banner-box img");
      this.images = Array.from(nodes).map((img) => ({
        src: img.currentSrc || img.src || img.getAttribute("src"),
        alt: img.alt || "",
      }));
    },

    openLightbox(index) {
      if (!this.images.length) return;
      this.currentIndex = index;
      this.isLightboxOpen = true;
      document.body.style.overflow = "hidden";
    },

    closeLightbox() {
      this.isLightboxOpen = false;
      document.body.style.overflow = "";
    },

    nextImage() {
      if (!this.images.length) return;
      this.currentIndex = (this.currentIndex + 1) % this.images.length;
    },

    prevImage() {
      if (!this.images.length) return;
      this.currentIndex =
        (this.currentIndex - 1 + this.images.length) % this.images.length;
    },

    onDocumentClick(e) {
      const box = e.target.closest(".image-box") || e.target.closest(".banner-box");
      if (!box) return;

      const boxes = Array.from(document.querySelectorAll(".image-box, .banner-box"));
      const index = boxes.indexOf(box);
      if (index === -1) return;

      this.refreshImages();
      this.openLightbox(index);
    },

    handleKeydown(e) {
      if (!this.isLightboxOpen) return;

      if (e.key === "Escape") this.closeLightbox();
      if (e.key === "ArrowRight") this.nextImage();
      if (e.key === "ArrowLeft") this.prevImage();
    },
  },

  mounted() {
    this.refreshImages();
    document.addEventListener("click", this.onDocumentClick);
    window.addEventListener("keydown", this.handleKeydown);
  },

  beforeUnmount() {
    document.removeEventListener("click", this.onDocumentClick);
    window.removeEventListener("keydown", this.handleKeydown);
  },
};
</script>

<style scoped>
.design-gallery {
  padding: 20px;
  color: white;
  font-family: "Futura PT", sans-serif;
  margin-top: 100px;
}

.gallery-title {
  font-size: 2rem;
  text-align: center;
  margin-bottom: 20px;
}

.gallery-container {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 15px;
}

.banner-box {
  grid-column: span 3;
  position: relative;
  overflow: hidden;
  cursor: pointer;
}

.gallery-banner {
  width: 100%;
  max-height: 300px;
  object-fit: contain;
  display: block;
  border-radius: 8px;
}

.image-box {
  position: relative;
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
}

.image-box:hover .gallery-image {
  transform: scale(1.1); /* Réduit un peu le zoom pour plus de propreté */
  transition: transform 0.3s ease-in-out;
}

.gallery-image {
  width: 100%;
  max-height: 200px;
  object-fit: contain;
  display: block;
  border-radius: 8px;
  transition: transform 0.3s ease-in-out;
}

.overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.6);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.3s ease;
  border-radius: 8px;
  text-align: center;
  padding: 5px;
}

.image-box:hover .overlay, .banner-box:hover .overlay {
  opacity: 1;
}

/* --- RESPONSIVE --- */

@media (max-width: 768px) {
  .design-gallery {
    margin-top: 80px; /* Moins de vide en haut sur mobile */
  }

  .gallery-title {
    font-size: 1.5rem;
  }

  .gallery-container {
    grid-template-columns: repeat(2, 1fr); /* 2 colonnes sur tablette */
  }

  .gallery-banner {
    max-height: 200px;
  }
}

@media (max-width: 480px) {
  .gallery-container {
    grid-template-columns: 1fr; /* 1 seule colonne sur mobile */
  }

  .gallery-title {
    font-size: 1.2rem;
  }

  .overlay p {
    font-size: 12px; /* Texte de l'overlay plus petit */
  }

  /* ✅ RÉTRÉCISSEMENT DES FLÈCHES SUR MOBILE */
  .lightbox-nav {
    font-size: 30px; 
    bottom: 10px;
    top: auto; /* On les place en bas pour ne pas gêner l'image */
    transform: none;
  }
  
  .lightbox-prev { left: 30%; }
  .lightbox-next { right: 30%; }

  .lightbox-image {
    max-height: 70vh; /* Laisse de la place pour les flèches en bas */
  }
}

/* Lightbox Styles */
.lightbox-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.95);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  padding: 20px;
}

.lightbox-content {
  max-width: 90vw;
  max-height: 90vh;
  text-align: center;
}

.lightbox-image {
  max-width: 100%;
  max-height: 80vh;
  object-fit: contain;
  border-radius: 8px;
}

.lightbox-title {
  margin-top: 15px;
  color: #fff;
  font-size: 14px;
  font-family: 'Futura PT', sans-serif;
}

.lightbox-close {
  position: absolute;
  top: 20px;
  right: 25px;
  border: none;
  background: transparent;
  color: #fff;
  font-size: 35px;
  cursor: pointer;
}

.lightbox-nav {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  border: none;
  background: transparent;
  color: #fff;
  font-size: 50px;
  cursor: pointer;
  padding: 10px;
  transition: color 0.3s;
}

.lightbox-nav:hover { color: #ff4500; }
.lightbox-prev { left: 10px; }
.lightbox-next { right: 10px; }
</style>